## Тестовое задание на вакансию **[HWBS Java Developer](https://moikrug.ru/vacancies/1000005277)**

### Описание ###

Нужно создать веб приложение, которое генерит 1.000.000 случайных строк, сохраняет их в базу, показывает полученные строки и их количество в виде таблицы. При реализации разрешается использовать [стандартный GWT](http://www.gwtproject.org), любую технологию для доступа к базе, любую технологию для клиент-серверного взаимодействия, [HSQLDB](hsqldb.org) и [Maven](https://maven.apache.org).

Приложение состоит из одной страницы. На странице есть три элемента:

* Таблица, показывающая все строки и их количество в базе данных. 
    * Таблица всегда показывает актуальное состояние базы. Т.е. если идет процесс генерации, то в таблице показывается часть записей, и это количество со временем растет. А если в базе данных нет, то показывается пустая таблица.
* Кнопка генерации строк. 
    * Строки генерятся случайным образом в формате NNNNN, где N - 0..9. Если оказывается, что такая строка уже есть в базе, то во второй колонке увеличивается счетчик.
    * В зависимости от состояния базы и текущей сессии, кнопка имеет разный функционал и наименование. Если база пустая и процесс генерации в данной сессии не запущен - генерит миллион записей. Если в текущей сессии уже идет процесс генерации - останавливает этот процесс. Если база непустая и процесс генерации не запущен - генерит новый миллион записей, удаляя абсолютно все имеющиеся.
    * Нужно предполагать, что серверный код генерации может быть запущен в нескольких параллельных потоках. Явно запрещать параллельную генерацию нельзя.
    * При разрушении серверной сессии должна останавливаться генерация, запущенная в этой сессии.
* Надпись с указанием количества всех записей в базе. 
    * Во время пере-/генерации значение меняется в реальном времени

В решении нужно сделать упор на:

* Правильную работу с соединениями, транзакциями и их уровнями изоляции;
* Корректную работу с приложением из нескольких окон браузера.

### Решение ###

* Для начала работы над решением нужно: **создать** `private reposritory`, сделав [fork](https://confluence.atlassian.com/bitbucket/forking-a-repository-221449527.html) этого проекта в свой [Bitbucket аккаунт](https://bitbucket.org/account/signup), **дать права** на чтение пользователю [ismagilov](https://bitbucket.org/ismagilov).
* После выполнения задания нужно отправить на почту ilya@faidon.com письмо с темой "HWBS Java Developer" и ссылкой на свой репозиторий с кодом решения.

### Указания ###

* Проект запускается из командной строки: `mvn gwt:run`. В решении запуск должен остаться таким же.
* Если проект уже запущен, то изменения в клиентском коде появляются после обновления страницы в браузере. Для появления серверных изменений нужно делать `Restart Server` в закладке `Jetty` диалога  `GWT Development Mode`.
* В проекте есть файл `V1__create.sql`. Файл содержит начальную схему базы данных. Она создается автоматически при запуске проекта через [Flyway](http://flywaydb.org).
* Файлы базы создаются в директории: `target/unique-numbers-1.0-SNAPSHOT/WEB-INF/db`.
* Если нужно внести изменения в схему или настройки базы, то это можно делать путем редактирования V1__create.sql (перед этим придется вручную удалить уже созданную базу).
* URL соединения к базе можно брать из класса [DatabaseContextListener](https://bitbucket.org/singulator/com.faidon.job.hwbs.unique-numbers/src/master/src/main/java/com/faidon/job/hwbs/un/server/DatabaseContextListener.java?at=master&fileviewer=file-view-default).

**Удачи!**